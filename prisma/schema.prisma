generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model GovAction {
  id       String        @unique
  category GovActionType
  expired  Boolean

  votingDeadline DateTime

  votes Vote[]
}

model Vote {
  id        String     @id @default(cuid())
  choice    VoteChoice
  rationale String?
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt

  voter String

  govActionId String
  govAction   GovAction @relation(fields: [govActionId], references: [id])

  @@unique([voter, govActionId])
  @@map("votes")
}

enum GovActionType {
  info_action
  parameter_change
  treasury_withdrawals
  hard_fork_initiation
  new_committee
  new_constitution
  no_confidence

  @@map("gov_action_type")
}

enum VoteChoice {
  YES
  NO
  ABSTAIN

  @@map("vote_choice")
}
